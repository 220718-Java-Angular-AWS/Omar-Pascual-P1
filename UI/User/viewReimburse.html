<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <form onsubmit="return false">
        <h3>Requests</h3>
        <label>Request</label>
        <button type="button" onclick="getRequest()">Get All</button>
    </form>
    <br>
    <button type="button" onclick="mainMenu()">Back</button>
</body>
<script>
    
    async function getRequest() {
        let userId = window.localStorage.getItem('userId');
        let url = 'http://localhost:8080/P1/reimburse?user-id=' + userId;
        let response = await fetch(url, {
            method: 'GET',
            headers: {
                'content-Type': 'application/json; charset=utf-8'
            },
        });

        let array = await response.json();
        let htmlELEMENT = document.getElementById('reimburseList');

        for(let i = 0; i < array.length; i++){
            let reimburse = array[i];

            htmlELEMENT.innerHTML +="<h1>Reimurse Id: " +reimburse.reimburseId + "<h1>";
            htmlELEMENT.innerHTML +="<h1>User Id: " +reimburse.userId + "<h1>";
            htmlELEMENT.innerHTML +="<h1>Ticket: " +reimburse.ticket + "<h1>";
            htmlELEMENT.innerHTML +="<h1>Reason: " +reimburse.reason + "<h1>";
            htmlELEMENT.innerHTML +="<h1>Amount: " +reimburse.amount + "<h1>";
            htmlELEMENT.innerHTML +="<h1>Pending: " +reimburse.pending + "<h1>";
        }
    }
    

    async function mainMenu(){
        location.href = "file:///C:/Omar-Pascual-P1/UI/User/mainMenu.html";
    }
    
</script>
</html>